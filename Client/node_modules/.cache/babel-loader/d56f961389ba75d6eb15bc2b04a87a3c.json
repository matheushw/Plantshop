{"ast":null,"code":"import { all, call, put, takeLatest } from 'redux-saga/effects';\nimport { loadUsersError, loadUsersSuccess } from './actionCreators';\nimport { ActionTypes } from './actionTypes';\nimport ApiRequester from './apiRequester';\n\n// worker Saga: will be fired on USER_FETCH_REQUESTED actions\nfunction* fetchUser(action) {\n  try {\n    const user = yield call(ApiRequester.tryToAuthenticate, action.email, action.password);\n    yield put(user.name === undefined ? loadUsersError() : loadUsersSuccess(user));\n  } catch (e) {\n    yield put(loadUsersError());\n  }\n}\n\nfunction* loadAllProductsSagas() {\n  try {\n    const user = yield call(ApiRequester.tryToGetAllProducts);\n    yield put(loadUsersSuccess(user));\n  } catch (e) {\n    yield put(loadUsersError());\n  }\n}\n\nfunction* mySaga() {\n  yield all([takeLatest(ActionTypes.LOAD_USER_REQUEST, fetchUser), takeLatest(ActionTypes.LOAD_ALL_PRODUCTS_REQUEST, loadAllProductsSagas)]);\n}\n\nexport default mySaga;","map":{"version":3,"sources":["/Users/matheuscunha/USP/Plantshop/src/store/sagas.ts"],"names":["all","call","put","takeLatest","loadUsersError","loadUsersSuccess","ActionTypes","ApiRequester","fetchUser","action","user","tryToAuthenticate","email","password","name","undefined","e","loadAllProductsSagas","tryToGetAllProducts","mySaga","LOAD_USER_REQUEST","LOAD_ALL_PRODUCTS_REQUEST"],"mappings":"AAAA,SAASA,GAAT,EAAcC,IAAd,EAAoBC,GAApB,EAAyBC,UAAzB,QAA2C,oBAA3C;AACA,SAASC,cAAT,EAAyBC,gBAAzB,QAAiD,kBAAjD;AAEA,SAASC,WAAT,QAA4B,eAA5B;AACA,OAAOC,YAAP,MAAyB,gBAAzB;;AAGA;AAEA,UAAUC,SAAV,CAAoBC,MAApB,EAAoD;AACjD,MAAI;AACD,UAAMC,IAAI,GAAG,MAAMT,IAAI,CAACM,YAAY,CAACI,iBAAd,EAAiCF,MAAM,CAACG,KAAxC,EAA+CH,MAAM,CAACI,QAAtD,CAAvB;AACA,UAAMX,GAAG,CAACQ,IAAI,CAACI,IAAL,KAAcC,SAAd,GAAyBX,cAAc,EAAvC,GAA4CC,gBAAgB,CAACK,IAAD,CAA7D,CAAT;AACF,GAHD,CAGE,OAAOM,CAAP,EAAU;AACT,UAAMd,GAAG,CAACE,cAAc,EAAf,CAAT;AACF;AACH;;AAED,UAAUa,oBAAV,GAAuC;AACpC,MAAI;AACD,UAAMP,IAAI,GAAG,MAAMT,IAAI,CAACM,YAAY,CAACW,mBAAd,CAAvB;AACA,UAAMhB,GAAG,CAACG,gBAAgB,CAACK,IAAD,CAAjB,CAAT;AACF,GAHD,CAGE,OAAOM,CAAP,EAAU;AACT,UAAMd,GAAG,CAACE,cAAc,EAAf,CAAT;AACF;AACH;;AAED,UAAUe,MAAV,GAAmB;AACjB,QAAMnB,GAAG,CAAC,CACPG,UAAU,CAACG,WAAW,CAACc,iBAAb,EAAgCZ,SAAhC,CADH,EAEPL,UAAU,CAACG,WAAW,CAACe,yBAAb,EAAwCJ,oBAAxC,CAFH,CAAD,CAAT;AAID;;AAED,eAAeE,MAAf","sourcesContent":["import { all, call, put, takeLatest } from 'redux-saga/effects'\nimport { loadUsersError, loadUsersSuccess } from './actionCreators';\nimport { LoadAllProductsRequest, LoadUsersRequest } from './actions';\nimport { ActionTypes } from './actionTypes';\nimport ApiRequester from './apiRequester'\nimport { User } from './types';\n\n// worker Saga: will be fired on USER_FETCH_REQUESTED actions\n\nfunction* fetchUser(action: LoadUsersRequest) : any {\n   try {\n      const user = yield call(ApiRequester.tryToAuthenticate, action.email, action.password);\n      yield put(user.name === undefined? loadUsersError() : loadUsersSuccess(user));\n   } catch (e) {\n      yield put(loadUsersError());\n   }\n}\n\nfunction* loadAllProductsSagas() : any {\n   try {\n      const user = yield call(ApiRequester.tryToGetAllProducts);\n      yield put(loadUsersSuccess(user));\n   } catch (e) {\n      yield put(loadUsersError());\n   }\n}\n\nfunction* mySaga() {\n  yield all([\n     takeLatest(ActionTypes.LOAD_USER_REQUEST, fetchUser),\n     takeLatest(ActionTypes.LOAD_ALL_PRODUCTS_REQUEST, loadAllProductsSagas),\n  ]);\n}\n\nexport default mySaga;"]},"metadata":{},"sourceType":"module"}