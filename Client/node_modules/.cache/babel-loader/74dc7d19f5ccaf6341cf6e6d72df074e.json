{"ast":null,"code":"import produce, { enableMapSet } from 'immer';\nimport { mockedUsers } from '../mock-objects/usersList';\nimport { ActionTypes } from './actionTypes';\nimport { loadUsersRequest } from './actionCreators';\nexport const initialState = {\n  loading: {\n    loadAllOrders: false,\n    placeRentOrders: false,\n    placePurchaseOrder: false,\n    user: false,\n    allProducts: false,\n    signUp: false\n  },\n  error: {\n    loadAllOrders: false,\n    placeRentOrders: false,\n    placePurchaseOrder: false,\n    user: false,\n    allProducts: false,\n    signUp: false\n  },\n  success: {\n    loadAllOrders: false,\n    placeRentOrders: false,\n    placePurchaseOrder: false,\n    signUp: false\n  },\n  user: null,\n  products: [],\n  cartProducts: new Map(),\n  rentOrders: [],\n  rentedProducts: [],\n  usersList: mockedUsers,\n  orders: []\n};\n\nconst reducer = (state = initialState, action) => {\n  enableMapSet();\n\n  switch (action.type) {\n    case ActionTypes.LOAD_USERS_LOCAL_STORAGE:\n      const email = localStorage.getItem('@plantshop/email');\n      const password = localStorage.getItem('@plantshop/password');\n      console.log('krloooo');\n\n      if (email && password) {\n        loadUsersRequest(email, password);\n      }\n\n      return state;\n\n    case ActionTypes.LOAD_USER_REQUEST:\n      return produce(state, draft => {\n        draft.loading.user = true;\n        draft.error.user = false;\n      });\n\n    case ActionTypes.LOAD_USER_SUCCESS:\n      return produce(state, draft => {\n        draft.loading.user = false;\n        draft.error.user = false;\n        localStorage.setItem('@plantshop/email', action.user.email);\n        localStorage.setItem('@plantshop/password', action.user.password);\n        draft.user = action.user;\n      });\n\n    case ActionTypes.LOAD_USER_ERROR:\n      return produce(state, draft => {\n        draft.loading.user = false;\n        draft.error.user = true;\n      });\n\n    case ActionTypes.LOAD_ALL_PRODUCTS_REQUEST:\n      return produce(state, draft => {\n        draft.loading.allProducts = true;\n        draft.error.allProducts = false;\n      });\n\n    case ActionTypes.LOAD_ALL_PRODUCTS_SUCCESS:\n      return produce(state, draft => {\n        draft.loading.allProducts = false;\n        draft.error.allProducts = false;\n        draft.products = action.products;\n      });\n\n    case ActionTypes.LOAD_ALL_PRODUCTS_ERROR:\n      return produce(state, draft => {\n        draft.loading.allProducts = false;\n        draft.error.allProducts = true;\n      });\n\n    case ActionTypes.ADD_PRODUCT_TO_CART_REQUEST:\n      return produce(state, draft => {\n        if (state.cartProducts.has(action.product.id)) {\n          const selectedProduct = state.cartProducts.get(action.product.id);\n          draft.cartProducts.set(action.product.id, { ...selectedProduct,\n            quantity: selectedProduct.quantity + 1\n          });\n        } else {\n          draft.cartProducts.set(action.product.id, action.product);\n        }\n      });\n\n    case ActionTypes.REMOVE_PRODUCT_FROM_CART_RQUEST:\n      return produce(state, draft => {\n        if (state.cartProducts.has(action.id)) {\n          const selectedProduct = state.cartProducts.get(action.id);\n          draft.cartProducts.delete(action.id);\n        }\n      });\n\n    case ActionTypes.PLACE_PURCHASE_ORDER_REQUEST:\n      return produce(state, draft => {\n        draft.loading.placePurchaseOrder = true;\n        draft.error.placePurchaseOrder = false;\n        draft.success.placePurchaseOrder = false;\n      });\n\n    case ActionTypes.PLACE_PURCHASE_ORDER_SUCCESS:\n      return produce(state, draft => {\n        draft.loading.placePurchaseOrder = false;\n        draft.error.placePurchaseOrder = false;\n        draft.success.placePurchaseOrder = true;\n      });\n\n    case ActionTypes.PLACE_PURCHASE_ORDER_ERROR:\n      return produce(state, draft => {\n        draft.loading.placePurchaseOrder = false;\n        draft.error.placePurchaseOrder = true;\n        draft.success.placePurchaseOrder = false;\n      });\n\n    case ActionTypes.CLEAR_PRODUCT_IN_CART_REQUEST:\n      return produce(state, draft => {\n        draft.cartProducts = new Map();\n        draft.rentOrders = [];\n      });\n    // case \"removeRentOrder\":\n    // case ActionTypes.:\n    //   return produce(state, draft => {\n    //     draft.rentOrders = [];\n    //     state.rentOrders.forEach((order) => {\n    //       if(order.orderId !== action.orderId) {\n    //         draft.rentOrders.push(order);\n    //       }\n    //     });\n    //   });\n\n    case ActionTypes.SING_UP_USER_REQUEST:\n      return produce(state, draft => {\n        draft.loading.signUp = true;\n        draft.error.signUp = false;\n        draft.success.signUp = false;\n      });\n\n    case ActionTypes.SING_UP_USER_SUCCESS:\n      return produce(state, draft => {\n        draft.loading.signUp = false;\n        draft.error.signUp = false;\n        draft.success.signUp = true;\n      });\n\n    case ActionTypes.SING_UP_USER_ERROR:\n      return produce(state, draft => {\n        draft.loading.signUp = false;\n        draft.error.signUp = true;\n        draft.success.signUp = false;\n      });\n    // case \"addInventory\":\n    // case ActionTypes.:\n    //   return produce(state, draft => {\n    //     draft.products.forEach((product, index) => {\n    //       if(product.id === action.productId){\n    //         draft.products[index].quantity++;\n    //       }\n    //     })\n    //   });\n    // case \"removeInventory\":\n    // case ActionTypes.:\n    //   return produce(state, draft => {\n    //     draft.products.forEach((product, index) => {\n    //       if(product.id === action.productId){\n    //         draft.products[index].quantity--;\n    //       }\n    //     })\n    //   });\n    // case \"rentProduct\":\n\n    case ActionTypes.RENT_PRODUCT_REQUEST:\n      return produce(state, draft => {\n        draft.rentOrders.push(action.rentOrder);\n      });\n\n    case ActionTypes.PLACE_RENT_ORDERS_REQUEST:\n      return produce(state, draft => {\n        draft.error.placeRentOrders = false;\n        draft.success.placeRentOrders = false;\n        draft.loading.placeRentOrders = true;\n      });\n\n    case ActionTypes.PLACE_RENT_ORDERS_SUCCESS:\n      return produce(state, draft => {\n        draft.error.placeRentOrders = false;\n        draft.success.placeRentOrders = true;\n        draft.loading.placeRentOrders = false;\n      });\n\n    case ActionTypes.PLACE_RENT_ORDERS_ERROR:\n      return produce(state, draft => {\n        draft.error.placeRentOrders = true;\n        draft.success.placeRentOrders = false;\n        draft.loading.placeRentOrders = false;\n      });\n\n    case ActionTypes.LOAD_ALL_ORDERS_REQUEST:\n      return produce(state, draft => {\n        draft.error.loadAllOrders = false;\n        draft.success.loadAllOrders = false;\n        draft.loading.loadAllOrders = true;\n      });\n\n    case ActionTypes.LOAD_ALL_ORDERS_SUCCESS:\n      return produce(state, draft => {\n        draft.error.loadAllOrders = false;\n        draft.success.loadAllOrders = true;\n        draft.loading.loadAllOrders = false;\n        draft.orders = action.purchaseOrders;\n        draft.rentedProducts = action.rentOrders;\n      });\n\n    case ActionTypes.LOAD_ALL_ORDERS_ERROR:\n      return produce(state, draft => {\n        draft.error.loadAllOrders = true;\n        draft.success.loadAllOrders = false;\n        draft.loading.loadAllOrders = false;\n      });\n    // case \"removeProduct\":\n    // case ActionTypes.:\n    //   const newProductsArray: ProductModel[] = [];\n    //   return produce(state, draft => {\n    //     draft.products.forEach((product, index) => {\n    //       if(product.id !== action.productId){\n    //         newProductsArray.push(product);\n    //       }\n    //     })\n    //     draft.products = newProductsArray;\n    //   });\n    // case \"editUser\":\n    // case ActionTypes.:\n    //   return produce(state, draft => {\n    //     draft.usersList = [];\n    //     let edited: boolean = false;\n    //     state.usersList.forEach((user) => {\n    //       if(!edited && user.id === action.id){\n    //         const newUser: User = {\n    //           id: action.id,\n    //           email: action.email,\n    //           password: user.password,\n    //           name: action.name,\n    //           address: action.address,\n    //           phoneNumber: action.phoneNumber,\n    //           role: user.role,\n    //         }\n    //         edited = true;\n    //         draft.user = newUser;\n    //         draft.usersList.push(newUser);\n    //       } else {\n    //         draft.usersList.push(user);\n    //       }\n    //     });\n    //   });\n    // case \"addAdmin\":\n    // case ActionTypes.:\n    //     return produce(state, draft => {\n    //       const admin: User = {\n    //           id: (state.usersList.length).toString(),\n    //           email: action.email,\n    //           password: action.password,\n    //           name: action.name,\n    //           address: action.address,\n    //           phoneNumber: action.phoneNumber,\n    //           role: 'admin',\n    //       }\n    //       draft.usersList.push(admin); \n    //     });\n    // case \"registerProduct\":\n    // case ActionTypes.:\n    //   return produce(state, draft => {\n    //     const product: ProductModel = {\n    //       id: (state.products.length+1).toString(),\n    //       img: action.img,\n    //       name: action.name,\n    //       price: action.price,\n    //       quantity: action.quantity,\n    //       type: action.category,\n    //       description: action.description,\n    //     }\n    //     draft.products.push(product);\n    //   });\n    // case \"minusProductInCart\":\n    // case ActionTypes.:\n    //   return produce(state, draft => {\n    //     if(state.cartProducts.has(action.id)){\n    //       const selectedProduct = state.cartProducts.get(action.id)!;\n    //       if(selectedProduct.quantity === 1){\n    //         draft.cartProducts.delete(action.id);\n    //       }else if(selectedProduct.quantity > 1){\n    //         draft.cartProducts.set(action.id, {...selectedProduct, quantity: selectedProduct.quantity - 1})\n    //       }\n    //     }\n    //   });\n    // case \"plusProductInCart\":\n    // case ActionTypes.:\n    //   return produce(state, draft => {\n    //     state.products.forEach(product => {\n    //       if(state.cartProducts.has(action.id)){\n    //         const selectedProduct = state.cartProducts.get(action.id)!;\n    //         if(product.id === action.id && product.quantity - selectedProduct.quantity > 0){\n    //           draft.cartProducts.set(action.id, {...selectedProduct, quantity: selectedProduct.quantity + 1})\n    //         }\n    //       }\n    //     });\n    //   });\n    // case ActionTypes.LOG_OUT_REQUEST:\n    //   return produce(state, draft => {\n    //     draft.loading = true;\n    //     draft.user = null;\n    //   });\n    // case ActionTypes.LOG_OUT_SUCCESS:\n    //   return produce(state, draft => {\n    //     draft.loading = false;\n    //     draft.user = null;\n    //   });\n    // case ActionTypes.LOG_OUT_ERROR:\n    //   return produce(state, draft => {\n    //     draft.loading = false;\n    //     draft.error = true;\n    //     draft.user = null;\n    //   });\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;","map":{"version":3,"sources":["/Users/matheuscunha/USP/Plantshop/src/store/reducer.ts"],"names":["produce","enableMapSet","mockedUsers","ActionTypes","loadUsersRequest","initialState","loading","loadAllOrders","placeRentOrders","placePurchaseOrder","user","allProducts","signUp","error","success","products","cartProducts","Map","rentOrders","rentedProducts","usersList","orders","reducer","state","action","type","LOAD_USERS_LOCAL_STORAGE","email","localStorage","getItem","password","console","log","LOAD_USER_REQUEST","draft","LOAD_USER_SUCCESS","setItem","LOAD_USER_ERROR","LOAD_ALL_PRODUCTS_REQUEST","LOAD_ALL_PRODUCTS_SUCCESS","LOAD_ALL_PRODUCTS_ERROR","ADD_PRODUCT_TO_CART_REQUEST","has","product","id","selectedProduct","get","set","quantity","REMOVE_PRODUCT_FROM_CART_RQUEST","delete","PLACE_PURCHASE_ORDER_REQUEST","PLACE_PURCHASE_ORDER_SUCCESS","PLACE_PURCHASE_ORDER_ERROR","CLEAR_PRODUCT_IN_CART_REQUEST","SING_UP_USER_REQUEST","SING_UP_USER_SUCCESS","SING_UP_USER_ERROR","RENT_PRODUCT_REQUEST","push","rentOrder","PLACE_RENT_ORDERS_REQUEST","PLACE_RENT_ORDERS_SUCCESS","PLACE_RENT_ORDERS_ERROR","LOAD_ALL_ORDERS_REQUEST","LOAD_ALL_ORDERS_SUCCESS","purchaseOrders","LOAD_ALL_ORDERS_ERROR"],"mappings":"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AA9B;AACA2B,QAAAA,KAAK,CAAC5B,OAAN,CAAcC,aAAd,GAA8B,KAA9B;AACD,OAJa,CAAd;AAKF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACE,aAAOgB,KAAP;AA1RJ;AA4RD,CA/RD;;AAiSA,eAAeD,OAAf","sourcesContent":["import produce, { enableMapSet } from 'immer';\nimport { mockedUsers } from '../mock-objects/usersList';\nimport { products } from '../mock-objects/products';\nimport { ApplicationState, User, Order, ProductOrder, ProductModel } from './types';\nimport { ApplicationAction } from './actions';\nimport { ActionTypes } from './actionTypes';\nimport { loadUsersLocalStorage, loadUsersRequest } from './actionCreators';\n\nexport const initialState: ApplicationState = {\n  loading: {\n    loadAllOrders: false,\n    placeRentOrders: false,\n    placePurchaseOrder: false,\n    user: false,\n    allProducts: false,\n    signUp: false,\n  },\n  error: {\n    loadAllOrders: false,\n    placeRentOrders: false,\n    placePurchaseOrder: false,\n    user: false,\n    allProducts: false,\n    signUp: false,\n  },\n  success: {\n    loadAllOrders: false,\n    placeRentOrders: false,\n    placePurchaseOrder: false,\n    signUp: false,\n  },\n  user: null,\n  products: [],\n  cartProducts: new Map(),\n  rentOrders: [],\n  rentedProducts: [],\n  usersList: mockedUsers,\n  orders: [],\n}\n\nconst reducer = (state = initialState, action: ApplicationAction) => {\n  enableMapSet();\n  \n  switch (action.type) {\n    case ActionTypes.LOAD_USERS_LOCAL_STORAGE:\n      const email = localStorage.getItem('@plantshop/email');\n      const password = localStorage.getItem('@plantshop/password');\n\n      console.log('krloooo');\n\n      if(email && password){\n        loadUsersRequest(email, password);\n      }\n\n      return state;\n    case ActionTypes.LOAD_USER_REQUEST:\n      return produce(state, draft => {\n        draft.loading.user = true;\n        draft.error.user = false;\n      });\n    case ActionTypes.LOAD_USER_SUCCESS:\n      return produce(state, draft => {\n      draft.loading.user = false;\n      draft.error.user = false;\n      localStorage.setItem('@plantshop/email', action.user.email);\n      localStorage.setItem('@plantshop/password', action.user.password);\n      draft.user = action.user;\n    });\n    case ActionTypes.LOAD_USER_ERROR:\n      return produce(state, draft => {\n        draft.loading.user = false;\n        draft.error.user = true;\n      });\n    case ActionTypes.LOAD_ALL_PRODUCTS_REQUEST:\n      return produce(state, draft => {\n        draft.loading.allProducts = true;\n        draft.error.allProducts = false;\n      });\n      case ActionTypes.LOAD_ALL_PRODUCTS_SUCCESS:\n        return produce(state, draft => {\n        draft.loading.allProducts = false;\n        draft.error.allProducts = false;\n        draft.products = action.products;\n      });\n    case ActionTypes.LOAD_ALL_PRODUCTS_ERROR:\n      return produce(state, draft => {\n        draft.loading.allProducts = false;\n        draft.error.allProducts = true;\n      });\n    case ActionTypes.ADD_PRODUCT_TO_CART_REQUEST:\n      return produce(state, draft => {\n        if(state.cartProducts.has(action.product.id)){\n          const selectedProduct = state.cartProducts.get(action.product.id)!;\n          draft.cartProducts.set(action.product.id, {...selectedProduct, quantity: selectedProduct.quantity + 1})\n        } else {\n          draft.cartProducts.set(action.product.id, action.product);\n        }\n      });\n    case ActionTypes.REMOVE_PRODUCT_FROM_CART_RQUEST:\n      return produce(state, draft => {\n        if(state.cartProducts.has(action.id)){\n          const selectedProduct = state.cartProducts.get(action.id)!;\n          draft.cartProducts.delete(action.id);          \n        }\n      });\n    case ActionTypes.PLACE_PURCHASE_ORDER_REQUEST:\n      return produce(state, draft => {\n        draft.loading.placePurchaseOrder = true;\n        draft.error.placePurchaseOrder = false;\n        draft.success.placePurchaseOrder = false;\n      });\n    case ActionTypes.PLACE_PURCHASE_ORDER_SUCCESS:\n      return produce(state, draft => {\n        draft.loading.placePurchaseOrder = false;\n        draft.error.placePurchaseOrder = false;\n        draft.success.placePurchaseOrder = true;\n      });\n    case ActionTypes.PLACE_PURCHASE_ORDER_ERROR:\n      return produce(state, draft => {\n        draft.loading.placePurchaseOrder = false;\n        draft.error.placePurchaseOrder = true;\n        draft.success.placePurchaseOrder = false;\n      });\n    case ActionTypes.CLEAR_PRODUCT_IN_CART_REQUEST:\n      return produce(state, draft => {\n        draft.cartProducts = new Map();\n        draft.rentOrders = [];\n      });\n    // case \"removeRentOrder\":\n    // case ActionTypes.:\n    //   return produce(state, draft => {\n    //     draft.rentOrders = [];\n    //     state.rentOrders.forEach((order) => {\n    //       if(order.orderId !== action.orderId) {\n    //         draft.rentOrders.push(order);\n    //       }\n    //     });\n    //   });\n    case ActionTypes.SING_UP_USER_REQUEST:\n      return produce(state, draft => {\n        draft.loading.signUp = true;\n        draft.error.signUp = false;\n        draft.success.signUp = false;\n      });\n    case ActionTypes.SING_UP_USER_SUCCESS:\n      return produce(state, draft => {\n        draft.loading.signUp = false;\n        draft.error.signUp = false;\n        draft.success.signUp = true; \n      });\n    case ActionTypes.SING_UP_USER_ERROR:\n      return produce(state, draft => {\n        draft.loading.signUp = false;\n        draft.error.signUp = true;\n        draft.success.signUp = false;\n      });\n    // case \"addInventory\":\n    // case ActionTypes.:\n    //   return produce(state, draft => {\n    //     draft.products.forEach((product, index) => {\n    //       if(product.id === action.productId){\n    //         draft.products[index].quantity++;\n    //       }\n    //     })\n    //   });\n\n    // case \"removeInventory\":\n    // case ActionTypes.:\n    //   return produce(state, draft => {\n    //     draft.products.forEach((product, index) => {\n    //       if(product.id === action.productId){\n    //         draft.products[index].quantity--;\n    //       }\n    //     })\n    //   });\n    // case \"rentProduct\":\n    case ActionTypes.RENT_PRODUCT_REQUEST:\n      return produce(state, draft => {\n        draft.rentOrders.push(action.rentOrder);\n      });\n    case ActionTypes.PLACE_RENT_ORDERS_REQUEST:\n      return produce(state, draft => {\n        draft.error.placeRentOrders = false;\n        draft.success.placeRentOrders = false;\n        draft.loading.placeRentOrders = true;\n      });\n    case ActionTypes.PLACE_RENT_ORDERS_SUCCESS:\n      return produce(state, draft => {\n        draft.error.placeRentOrders = false;\n        draft.success.placeRentOrders = true;\n        draft.loading.placeRentOrders = false;\n      });\n    case ActionTypes.PLACE_RENT_ORDERS_ERROR:\n      return produce(state, draft => {\n        draft.error.placeRentOrders = true;\n        draft.success.placeRentOrders = false;\n        draft.loading.placeRentOrders = false;\n      });\n    case ActionTypes.LOAD_ALL_ORDERS_REQUEST:\n      return produce(state, draft => {\n        draft.error.loadAllOrders = false;\n        draft.success.loadAllOrders = false;\n        draft.loading.loadAllOrders = true;\n      });\n    case ActionTypes.LOAD_ALL_ORDERS_SUCCESS:\n      return produce(state, draft => {\n        draft.error.loadAllOrders = false;\n        draft.success.loadAllOrders = true;\n        draft.loading.loadAllOrders = false;\n        draft.orders = action.purchaseOrders;\n        draft.rentedProducts = action.rentOrders;\n      });\n    case ActionTypes.LOAD_ALL_ORDERS_ERROR:\n      return produce(state, draft => {\n        draft.error.loadAllOrders = true;\n        draft.success.loadAllOrders = false;\n        draft.loading.loadAllOrders = false;\n      });\n    // case \"removeProduct\":\n    // case ActionTypes.:\n    //   const newProductsArray: ProductModel[] = [];\n    //   return produce(state, draft => {\n    //     draft.products.forEach((product, index) => {\n    //       if(product.id !== action.productId){\n    //         newProductsArray.push(product);\n    //       }\n    //     })\n\n    //     draft.products = newProductsArray;\n    //   });\n      \n    // case \"editUser\":\n    // case ActionTypes.:\n    //   return produce(state, draft => {\n    //     draft.usersList = [];\n    //     let edited: boolean = false;\n    //     state.usersList.forEach((user) => {\n    //       if(!edited && user.id === action.id){\n    //         const newUser: User = {\n    //           id: action.id,\n    //           email: action.email,\n    //           password: user.password,\n    //           name: action.name,\n    //           address: action.address,\n    //           phoneNumber: action.phoneNumber,\n    //           role: user.role,\n    //         }\n    //         edited = true;\n    //         draft.user = newUser;\n    //         draft.usersList.push(newUser);\n            \n    //       } else {\n    //         draft.usersList.push(user);\n    //       }\n    //     });\n    //   });\n    // case \"addAdmin\":\n    // case ActionTypes.:\n    //     return produce(state, draft => {\n    //       const admin: User = {\n    //           id: (state.usersList.length).toString(),\n    //           email: action.email,\n    //           password: action.password,\n    //           name: action.name,\n    //           address: action.address,\n    //           phoneNumber: action.phoneNumber,\n    //           role: 'admin',\n    //       }\n    //       draft.usersList.push(admin); \n    //     });\n    // case \"registerProduct\":\n    // case ActionTypes.:\n    //   return produce(state, draft => {\n    //     const product: ProductModel = {\n    //       id: (state.products.length+1).toString(),\n    //       img: action.img,\n    //       name: action.name,\n    //       price: action.price,\n    //       quantity: action.quantity,\n    //       type: action.category,\n    //       description: action.description,\n    //     }\n    //     draft.products.push(product);\n    //   });\n    // case \"minusProductInCart\":\n    // case ActionTypes.:\n    //   return produce(state, draft => {\n    //     if(state.cartProducts.has(action.id)){\n    //       const selectedProduct = state.cartProducts.get(action.id)!;\n    //       if(selectedProduct.quantity === 1){\n    //         draft.cartProducts.delete(action.id);\n    //       }else if(selectedProduct.quantity > 1){\n    //         draft.cartProducts.set(action.id, {...selectedProduct, quantity: selectedProduct.quantity - 1})\n    //       }\n    //     }\n    //   });\n    // case \"plusProductInCart\":\n    // case ActionTypes.:\n    //   return produce(state, draft => {\n    //     state.products.forEach(product => {\n    //       if(state.cartProducts.has(action.id)){\n    //         const selectedProduct = state.cartProducts.get(action.id)!;\n    //         if(product.id === action.id && product.quantity - selectedProduct.quantity > 0){\n    //           draft.cartProducts.set(action.id, {...selectedProduct, quantity: selectedProduct.quantity + 1})\n    //         }\n    //       }\n    //     });\n    //   });\n    // case ActionTypes.LOG_OUT_REQUEST:\n    //   return produce(state, draft => {\n    //     draft.loading = true;\n    //     draft.user = null;\n    //   });\n    // case ActionTypes.LOG_OUT_SUCCESS:\n    //   return produce(state, draft => {\n    //     draft.loading = false;\n    //     draft.user = null;\n    //   });\n    // case ActionTypes.LOG_OUT_ERROR:\n    //   return produce(state, draft => {\n    //     draft.loading = false;\n    //     draft.error = true;\n    //     draft.user = null;\n    //   });\n    default:\n      return state;\n  }\n}\n\nexport default reducer;"]},"metadata":{},"sourceType":"module"}